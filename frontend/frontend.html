<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arena Pinheiro - Sistema de Gest√£o</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .config-section {
            padding: 20px;
            background: #f5f5f5;
            border-bottom: 1px solid #ddd;
        }

        .config-section input {
            padding: 10px;
            margin: 5px;
            border: 1px solid #ddd;
            border-radius: 5px;
            width: 200px;
        }

        .config-section button {
            padding: 10px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }

        .config-section button:hover {
            background: #5568d3;
        }

        .tabs {
            display: flex;
            background: #f0f0f0;
            border-bottom: 2px solid #ddd;
            flex-wrap: wrap;
        }

        .tab {
            padding: 15px 25px;
            cursor: pointer;
            background: #e0e0e0;
            border: none;
            border-right: 1px solid #ddd;
            font-size: 14px;
            transition: all 0.3s;
        }

        .tab:hover {
            background: #d0d0d0;
        }

        .tab.active {
            background: white;
            border-bottom: 3px solid #667eea;
            font-weight: bold;
        }

        .content {
            padding: 30px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            padding: 12px 25px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 10px;
            margin-top: 10px;
        }

        .btn:hover {
            background: #5568d3;
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-danger {
            background: #dc3545;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .table-container {
            overflow-x: auto;
            margin-top: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background: #667eea;
            color: white;
            font-weight: bold;
        }

        tr:hover {
            background: #f5f5f5;
        }

        .message {
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            display: none;
        }

        .message.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .message.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .message.show {
            display: block;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #ddd;
        }

        .card h3 {
            margin-bottom: 15px;
            color: #667eea;
        }

        .search-box {
            margin-bottom: 20px;
        }

        .search-box input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèüÔ∏è Arena Pinheiro</h1>
            <p>Sistema de Gest√£o Completo</p>
        </div>

        <div class="config-section">
            <h3>Configura√ß√£o da API</h3>
            <input type="text" id="apiUrl" placeholder="URL da API (ex: http://localhost:8000)" value="http://localhost:8000">
            <button onclick="testConnection()">Testar Conex√£o</button>
            <span id="connectionStatus"></span>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('usuarios')">Usu√°rios</button>
            <button class="tab" onclick="showTab('clientes')">Clientes</button>
            <button class="tab" onclick="showTab('campos')">Campos</button>
            <button class="tab" onclick="showTab('reservas')">Reservas</button>
            <button class="tab" onclick="showTab('produtos')">Produtos</button>
            <button class="tab" onclick="showTab('estoque')">Estoque</button>
            <button class="tab" onclick="showTab('mesas')">Mesas</button>
            <button class="tab" onclick="showTab('comandas')">Comandas</button>
            <button class="tab" onclick="showTab('compras')">Compras</button>
            <button class="tab" onclick="showTab('pagamentos')">Pagamentos</button>
        </div>

        <div class="content">
            <!-- Mensagens -->
            <div id="message" class="message"></div>

            <!-- Tab Usu√°rios -->
            <div id="usuarios" class="tab-content active">
                <h2>Gerenciamento de Usu√°rios</h2>
                <div class="grid">
                    <div class="card">
                        <h3>Cadastrar Usu√°rio</h3>
                        <div class="form-group">
                            <label>ID Usu√°rio:</label>
                            <input type="number" id="usuario_id" required>
                        </div>
                        <div class="form-group">
                            <label>Nome:</label>
                            <input type="text" id="usuario_nome" required>
                        </div>
                        <div class="form-group">
                            <label>Senha:</label>
                            <input type="password" id="usuario_senha" required>
                        </div>
                        <div class="form-group">
                            <label>Tipo Usu√°rio:</label>
                            <select id="usuario_tipo">
                                <option value="Administrador">Administrador</option>
                                <option value="Funcionario">Funcion√°rio</option>
                                <option value="Cliente">Cliente</option>
                            </select>
                        </div>
                        <button class="btn" onclick="criarUsuario()">Cadastrar</button>
                        <button class="btn btn-secondary" onclick="listarUsuarios()">Listar Todos</button>
                    </div>
                    <div class="card">
                        <h3>Buscar Usu√°rio</h3>
                        <div class="form-group">
                            <label>ID Usu√°rio:</label>
                            <input type="number" id="buscar_usuario_id">
                        </div>
                        <button class="btn" onclick="buscarUsuario()">Buscar</button>
                        <button class="btn btn-secondary" onclick="limparFormUsuario()">Limpar</button>
                    </div>
                </div>
                <div class="table-container">
                    <table id="usuariosTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nome</th>
                                <th>Tipo</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="usuariosTableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Tab Clientes -->
            <div id="clientes" class="tab-content">
                <h2>Gerenciamento de Clientes</h2>
                <div class="grid">
                    <div class="card">
                        <h3>Cadastrar Cliente</h3>
                        <div class="form-group">
                            <label>CPF:</label>
                            <input type="text" id="cliente_cpf" required>
                        </div>
                        <div class="form-group">
                            <label>Nome:</label>
                            <input type="text" id="cliente_nome" required>
                        </div>
                        <div class="form-group">
                            <label>Email:</label>
                            <input type="email" id="cliente_email" required>
                        </div>
                        <div class="form-group">
                            <label>Tipo:</label>
                            <input type="text" id="cliente_tipo" required>
                        </div>
                        <div class="form-group">
                            <label>ID Usu√°rio que Cadastrou:</label>
                            <input type="number" id="cliente_id_usuario" required>
                        </div>
                        <button class="btn" onclick="criarCliente()">Cadastrar</button>
                        <button class="btn btn-secondary" onclick="listarClientes()">Listar Todos</button>
                    </div>
                </div>
                <div class="table-container">
                    <table id="clientesTable">
                        <thead>
                            <tr>
                                <th>CPF</th>
                                <th>Nome</th>
                                <th>Email</th>
                                <th>Tipo</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="clientesTableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Tab Campos -->
            <div id="campos" class="tab-content">
                <h2>Gerenciamento de Campos</h2>
                <div class="grid">
                    <div class="card">
                        <h3>Cadastrar Campo</h3>
                        <div class="form-group">
                            <label>N√∫mero:</label>
                            <input type="number" id="campo_numero" required>
                        </div>
                        <div class="form-group">
                            <label>Status:</label>
                            <select id="campo_status">
                                <option value="Disponivel">Dispon√≠vel</option>
                                <option value="Ocupado">Ocupado</option>
                                <option value="Manutencao">Manuten√ß√£o</option>
                            </select>
                        </div>
                        <button class="btn" onclick="criarCampo()">Cadastrar</button>
                        <button class="btn btn-secondary" onclick="listarCampos()">Listar Todos</button>
                    </div>
                </div>
                <div class="table-container">
                    <table id="camposTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>N√∫mero</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="camposTableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Tab Reservas -->
            <div id="reservas" class="tab-content">
                <h2>Gerenciamento de Reservas</h2>
                <div class="grid">
                    <div class="card">
                        <h3>Cadastrar Reserva</h3>
                        <div class="form-group">
                            <label>Data:</label>
                            <input type="date" id="reserva_data" required>
                        </div>
                        <div class="form-group">
                            <label>Quantidade de Horas:</label>
                            <input type="number" id="reserva_horas" required>
                        </div>
                        <div class="form-group">
                            <label>Status:</label>
                            <select id="reserva_status">
                                <option value="Agendada">Agendada</option>
                                <option value="Confirmada">Confirmada</option>
                                <option value="Cancelada">Cancelada</option>
                                <option value="Concluida">Conclu√≠da</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>CPF Cliente:</label>
                            <input type="text" id="reserva_cpf" required>
                        </div>
                        <div class="form-group">
                            <label>ID Campo:</label>
                            <input type="number" id="reserva_campo" required>
                        </div>
                        <div class="form-group">
                            <label>ID Usu√°rio que Cadastrou:</label>
                            <input type="number" id="reserva_usuario" required>
                        </div>
                        <button class="btn" onclick="criarReserva()">Cadastrar</button>
                        <button class="btn btn-secondary" onclick="listarReservas()">Listar Todas</button>
                    </div>
                </div>
                <div class="table-container">
                    <table id="reservasTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Data</th>
                                <th>Horas</th>
                                <th>Status</th>
                                <th>CPF Cliente</th>
                                <th>ID Campo</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="reservasTableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Tab Produtos -->
            <div id="produtos" class="tab-content">
                <h2>Gerenciamento de Produtos</h2>
                <div class="grid">
                    <div class="card">
                        <h3>Cadastrar Produto</h3>
                        <div class="form-group">
                            <label>Nome:</label>
                            <input type="text" id="produto_nome" required>
                        </div>
                        <div class="form-group">
                            <label>Pre√ßo:</label>
                            <input type="number" step="0.01" id="produto_preco" required>
                        </div>
                        <div class="form-group">
                            <label>Validade:</label>
                            <input type="date" id="produto_validade">
                        </div>
                        <div class="form-group">
                            <label>Quantidade M√≠nima Estoque:</label>
                            <input type="number" id="produto_quant_min" required>
                        </div>
                        <div class="form-group">
                            <label>ID Admin que Cadastrou:</label>
                            <input type="number" id="produto_admin" required>
                        </div>
                        <button class="btn" onclick="criarProduto()">Cadastrar</button>
                        <button class="btn btn-secondary" onclick="listarProdutos()">Listar Todos</button>
                    </div>
                </div>
                <div class="table-container">
                    <table id="produtosTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nome</th>
                                <th>Pre√ßo</th>
                                <th>Validade</th>
                                <th>Quant. M√≠n.</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="produtosTableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Tab Estoque -->
            <div id="estoque" class="tab-content">
                <h2>Gerenciamento de Estoque</h2>
                <div class="grid">
                    <div class="card">
                        <h3>Adicionar Estoque</h3>
                        <div class="form-group">
                            <label>ID Produto:</label>
                            <input type="number" id="estoque_produto" required>
                        </div>
                        <div class="form-group">
                            <label>Quantidade Presente:</label>
                            <input type="number" id="estoque_quant" required>
                        </div>
                        <button class="btn" onclick="criarEstoque()">Cadastrar</button>
                        <button class="btn btn-secondary" onclick="listarEstoques()">Listar Todos</button>
                    </div>
                    <div class="card">
                        <h3>Movimenta√ß√£o de Estoque</h3>
                        <div class="form-group">
                            <label>ID Estoque:</label>
                            <input type="number" id="mov_estoque" required>
                        </div>
                        <div class="form-group">
                            <label>Tipo:</label>
                            <select id="mov_tipo">
                                <option value="entrada">Entrada</option>
                                <option value="saida">Sa√≠da</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Quantidade:</label>
                            <input type="number" id="mov_quant" required>
                        </div>
                        <div class="form-group">
                            <label>Data:</label>
                            <input type="date" id="mov_data" required>
                        </div>
                        <button class="btn" onclick="criarMovimentacao()">Registrar Movimenta√ß√£o</button>
                    </div>
                </div>
                <div class="table-container">
                    <table id="estoqueTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>ID Produto</th>
                                <th>Quantidade Presente</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="estoqueTableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Tab Mesas -->
            <div id="mesas" class="tab-content">
                <h2>Gerenciamento de Mesas</h2>
                <div class="grid">
                    <div class="card">
                        <h3>Cadastrar Mesa</h3>
                        <div class="form-group">
                            <label>N√∫mero:</label>
                            <input type="number" id="mesa_numero" required>
                        </div>
                        <div class="form-group">
                            <label>Status:</label>
                            <select id="mesa_status">
                                <option value="Livre">Livre</option>
                                <option value="Ocupada">Ocupada</option>
                                <option value="Reservada">Reservada</option>
                            </select>
                        </div>
                        <button class="btn" onclick="criarMesa()">Cadastrar</button>
                        <button class="btn btn-secondary" onclick="listarMesas()">Listar Todas</button>
                    </div>
                </div>
                <div class="table-container">
                    <table id="mesasTable">
                        <thead>
                            <tr>
                                <th>N√∫mero</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="mesasTableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Tab Comandas -->
            <div id="comandas" class="tab-content">
                <h2>Gerenciamento de Comandas</h2>
                <div class="grid">
                    <div class="card">
                        <h3>Cadastrar Comanda</h3>
                        <div class="form-group">
                            <label>Data:</label>
                            <input type="date" id="comanda_data" required>
                        </div>
                        <div class="form-group">
                            <label>Status:</label>
                            <select id="comanda_status">
                                <option value="Aberta">Aberta</option>
                                <option value="Fechada">Fechada</option>
                                <option value="Paga">Paga</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>N√∫mero Mesa:</label>
                            <input type="number" id="comanda_mesa" required>
                        </div>
                        <div class="form-group">
                            <label>CPF Cliente:</label>
                            <input type="text" id="comanda_cpf" required>
                        </div>
                        <div class="form-group">
                            <label>ID Funcion√°rio:</label>
                            <input type="number" id="comanda_funcionario" required>
                        </div>
                        <button class="btn" onclick="criarComanda()">Cadastrar</button>
                        <button class="btn btn-secondary" onclick="listarComandas()">Listar Todas</button>
                    </div>
                    <div class="card">
                        <h3>Adicionar Item √† Comanda</h3>
                        <div class="form-group">
                            <label>ID Comanda:</label>
                            <input type="number" id="item_comanda_id" required>
                        </div>
                        <div class="form-group">
                            <label>ID Produto:</label>
                            <input type="number" id="item_comanda_produto" required>
                        </div>
                        <div class="form-group">
                            <label>Quantidade:</label>
                            <input type="number" id="item_comanda_quant" required>
                        </div>
                        <div class="form-group">
                            <label>Pre√ßo Unit√°rio:</label>
                            <input type="number" step="0.01" id="item_comanda_preco" required>
                        </div>
                        <button class="btn" onclick="adicionarItemComanda()">Adicionar Item</button>
                    </div>
                </div>
                <div class="table-container">
                    <table id="comandasTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Data</th>
                                <th>Status</th>
                                <th>Mesa</th>
                                <th>CPF Cliente</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="comandasTableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Tab Compras -->
            <div id="compras" class="tab-content">
                <h2>Gerenciamento de Compras</h2>
                <div class="grid">
                    <div class="card">
                        <h3>Cadastrar Compra</h3>
                        <div class="form-group">
                            <label>Data:</label>
                            <input type="date" id="compra_data" required>
                        </div>
                        <div class="form-group">
                            <label>Valor Total:</label>
                            <input type="number" step="0.01" id="compra_valor" required>
                        </div>
                        <div class="form-group">
                            <label>CPF Cliente:</label>
                            <input type="text" id="compra_cpf" required>
                        </div>
                        <div class="form-group">
                            <label>ID Usu√°rio que Cadastrou:</label>
                            <input type="number" id="compra_usuario" required>
                        </div>
                        <button class="btn" onclick="criarCompra()">Cadastrar</button>
                        <button class="btn btn-secondary" onclick="listarCompras()">Listar Todas</button>
                    </div>
                    <div class="card">
                        <h3>Adicionar Item √† Compra</h3>
                        <div class="form-group">
                            <label>ID Compra:</label>
                            <input type="number" id="item_compra_id" required>
                        </div>
                        <div class="form-group">
                            <label>ID Produto:</label>
                            <input type="number" id="item_compra_produto" required>
                        </div>
                        <div class="form-group">
                            <label>Quantidade:</label>
                            <input type="number" id="item_compra_quant" required>
                        </div>
                        <div class="form-group">
                            <label>Pre√ßo Unit√°rio:</label>
                            <input type="number" step="0.01" id="item_compra_preco" required>
                        </div>
                        <button class="btn" onclick="adicionarItemCompra()">Adicionar Item</button>
                    </div>
                </div>
                <div class="table-container">
                    <table id="comprasTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Data</th>
                                <th>Valor Total</th>
                                <th>CPF Cliente</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="comprasTableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Tab Pagamentos -->
            <div id="pagamentos" class="tab-content">
                <h2>Gerenciamento de Pagamentos</h2>
                <div class="grid">
                    <div class="card">
                        <h3>Cadastrar Pagamento</h3>
                        <div class="form-group">
                            <label>Valor:</label>
                            <input type="number" step="0.01" id="pagamento_valor" required>
                        </div>
                        <div class="form-group">
                            <label>Forma:</label>
                            <select id="pagamento_forma">
                                <option value="Dinheiro">Dinheiro</option>
                                <option value="Cartao">Cart√£o</option>
                                <option value="PIX">PIX</option>
                                <option value="Transferencia">Transfer√™ncia</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Tipo Pagamento:</label>
                            <select id="pagamento_tipo">
                                <option value="Comanda">Comanda</option>
                                <option value="Reserva">Reserva</option>
                                <option value="Compra">Compra</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>ID Usu√°rio que Cadastrou:</label>
                            <input type="number" id="pagamento_usuario" required>
                        </div>
                        <button class="btn" onclick="criarPagamento()">Cadastrar</button>
                        <button class="btn btn-secondary" onclick="listarPagamentos()">Listar Todos</button>
                    </div>
                    <div class="card">
                        <h3>Vincular Pagamento</h3>
                        <div class="form-group">
                            <label>Tipo:</label>
                            <select id="vinculo_tipo" onchange="atualizarCamposVinculo()">
                                <option value="comanda">Comanda</option>
                                <option value="reserva">Reserva</option>
                                <option value="compra">Compra</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>ID Pagamento:</label>
                            <input type="number" id="vinculo_pagamento" required>
                        </div>
                        <div class="form-group" id="vinculo_comanda_group">
                            <label>ID Comanda:</label>
                            <input type="number" id="vinculo_comanda">
                        </div>
                        <div class="form-group" id="vinculo_reserva_group" style="display:none">
                            <label>ID Reserva:</label>
                            <input type="number" id="vinculo_reserva">
                            <label>CPF Cliente:</label>
                            <input type="text" id="vinculo_reserva_cpf">
                            <label>Porcentagem:</label>
                            <input type="number" step="0.01" id="vinculo_reserva_porc">
                        </div>
                        <div class="form-group" id="vinculo_compra_group" style="display:none">
                            <label>ID Compra:</label>
                            <input type="number" id="vinculo_compra">
                        </div>
                        <button class="btn" onclick="vincularPagamento()">Vincular</button>
                    </div>
                </div>
                <div class="table-container">
                    <table id="pagamentosTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Valor</th>
                                <th>Forma</th>
                                <th>Tipo</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="pagamentosTableBody"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_URL = () => document.getElementById('apiUrl').value || 'http://localhost:8000';

        // Fun√ß√µes de UI
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function showMessage(text, type = 'success') {
            const msg = document.getElementById('message');
            msg.textContent = text;
            msg.className = `message ${type} show`;
            setTimeout(() => {
                msg.classList.remove('show');
            }, 5000);
        }

        async function testConnection() {
            try {
                const response = await fetch(`${API_URL()}/health`);
                const data = await response.json();
                const statusEl = document.getElementById('connectionStatus');
                if (data.status === 'healthy') {
                    statusEl.textContent = '‚úì Conectado';
                    statusEl.style.color = 'green';
                    showMessage('Conex√£o estabelecida com sucesso!', 'success');
                } else {
                    statusEl.textContent = '‚úó Erro';
                    statusEl.style.color = 'red';
                    showMessage('Erro na conex√£o', 'error');
                }
            } catch (error) {
                document.getElementById('connectionStatus').textContent = '‚úó Erro';
                document.getElementById('connectionStatus').style.color = 'red';
                showMessage('Erro ao conectar: ' + error.message, 'error');
            }
        }

        // Fun√ß√µes de Usu√°rios
        async function criarUsuario() {
            try {
                const data = {
                    id_usuario: parseInt(document.getElementById('usuario_id').value),
                    nome: document.getElementById('usuario_nome').value,
                    senha: document.getElementById('usuario_senha').value,
                    tipo_usuario: document.getElementById('usuario_tipo').value
                };
                const response = await fetch(`${API_URL()}/api/usuarios/`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                if (response.ok) {
                    showMessage('Usu√°rio criado com sucesso!', 'success');
                    listarUsuarios();
                } else {
                    showMessage('Erro: ' + result.detail, 'error');
                }
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function listarUsuarios() {
            try {
                const response = await fetch(`${API_URL()}/api/usuarios/`);
                const data = await response.json();
                const tbody = document.getElementById('usuariosTableBody');
                tbody.innerHTML = data.map(u => `
                    <tr>
                        <td>${u.id_usuario}</td>
                        <td>${u.nome}</td>
                        <td>${u.tipo_usuario}</td>
                        <td>
                            <button class="btn btn-secondary" onclick="buscarUsuarioPorId(${u.id_usuario})">Editar</button>
                            <button class="btn btn-danger" onclick="deletarUsuario(${u.id_usuario})">Deletar</button>
                        </td>
                    </tr>
                `).join('');
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function buscarUsuario() {
            const id = document.getElementById('buscar_usuario_id').value;
            if (!id) {
                showMessage('Digite um ID', 'error');
                return;
            }
            buscarUsuarioPorId(id);
        }

        async function buscarUsuarioPorId(id) {
            try {
                const response = await fetch(`${API_URL()}/api/usuarios/${id}`);
                const data = await response.json();
                if (response.ok) {
                    document.getElementById('usuario_id').value = data.id_usuario;
                    document.getElementById('usuario_nome').value = data.nome;
                    document.getElementById('usuario_tipo').value = data.tipo_usuario;
                    showMessage('Usu√°rio encontrado!', 'success');
                } else {
                    showMessage('Usu√°rio n√£o encontrado', 'error');
                }
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function deletarUsuario(id) {
            if (!confirm('Tem certeza que deseja deletar este usu√°rio?')) return;
            try {
                const response = await fetch(`${API_URL()}/api/usuarios/${id}`, { method: 'DELETE' });
                if (response.ok) {
                    showMessage('Usu√°rio deletado!', 'success');
                    listarUsuarios();
                } else {
                    showMessage('Erro ao deletar', 'error');
                }
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        function limparFormUsuario() {
            document.getElementById('usuario_id').value = '';
            document.getElementById('usuario_nome').value = '';
            document.getElementById('usuario_senha').value = '';
            document.getElementById('usuario_tipo').value = 'Administrador';
        }

        // Fun√ß√µes de Clientes
        async function criarCliente() {
            try {
                const data = {
                    cpf: document.getElementById('cliente_cpf').value,
                    nome: document.getElementById('cliente_nome').value,
                    email: document.getElementById('cliente_email').value,
                    tipo: document.getElementById('cliente_tipo').value,
                    id_usuario_cadastrou: parseInt(document.getElementById('cliente_id_usuario').value)
                };
                const response = await fetch(`${API_URL()}/api/clientes/`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                if (response.ok) {
                    showMessage('Cliente criado com sucesso!', 'success');
                    listarClientes();
                } else {
                    showMessage('Erro: ' + result.detail, 'error');
                }
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function listarClientes() {
            try {
                const response = await fetch(`${API_URL()}/api/clientes/`);
                const data = await response.json();
                const tbody = document.getElementById('clientesTableBody');
                tbody.innerHTML = data.map(c => `
                    <tr>
                        <td>${c.cpf}</td>
                        <td>${c.nome}</td>
                        <td>${c.email}</td>
                        <td>${c.tipo}</td>
                        <td>
                            <button class="btn btn-danger" onclick="deletarCliente('${c.cpf}')">Deletar</button>
                        </td>
                    </tr>
                `).join('');
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function deletarCliente(cpf) {
            if (!confirm('Tem certeza que deseja deletar este cliente?')) return;
            try {
                const response = await fetch(`${API_URL()}/api/clientes/${cpf}`, { method: 'DELETE' });
                if (response.ok) {
                    showMessage('Cliente deletado!', 'success');
                    listarClientes();
                } else {
                    showMessage('Erro ao deletar', 'error');
                }
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        // Fun√ß√µes de Campos
        async function criarCampo() {
            try {
                const data = {
                    numero: parseInt(document.getElementById('campo_numero').value),
                    status: document.getElementById('campo_status').value
                };
                const response = await fetch(`${API_URL()}/api/campos/`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                if (response.ok) {
                    showMessage('Campo criado com sucesso!', 'success');
                    listarCampos();
                } else {
                    showMessage('Erro: ' + result.detail, 'error');
                }
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function listarCampos() {
            try {
                const response = await fetch(`${API_URL()}/api/campos/`);
                const data = await response.json();
                const tbody = document.getElementById('camposTableBody');
                tbody.innerHTML = data.map(c => `
                    <tr>
                        <td>${c.id_campo}</td>
                        <td>${c.numero}</td>
                        <td>${c.status}</td>
                        <td>
                            <button class="btn btn-danger" onclick="deletarCampo(${c.id_campo})">Deletar</button>
                        </td>
                    </tr>
                `).join('');
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function deletarCampo(id) {
            if (!confirm('Tem certeza que deseja deletar este campo?')) return;
            try {
                const response = await fetch(`${API_URL()}/api/campos/${id}`, { method: 'DELETE' });
                if (response.ok) {
                    showMessage('Campo deletado!', 'success');
                    listarCampos();
                } else {
                    showMessage('Erro ao deletar', 'error');
                }
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        // Fun√ß√µes de Reservas
        async function criarReserva() {
            try {
                const data = {
                    data: document.getElementById('reserva_data').value,
                    quant_horas: parseInt(document.getElementById('reserva_horas').value),
                    status: document.getElementById('reserva_status').value,
                    cpf_cliente: document.getElementById('reserva_cpf').value,
                    id_campo: parseInt(document.getElementById('reserva_campo').value),
                    id_usuario_cadastrou: parseInt(document.getElementById('reserva_usuario').value)
                };
                const response = await fetch(`${API_URL()}/api/reservas/`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                if (response.ok) {
                    showMessage('Reserva criada com sucesso!', 'success');
                    listarReservas();
                } else {
                    showMessage('Erro: ' + result.detail, 'error');
                }
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function listarReservas() {
            try {
                const response = await fetch(`${API_URL()}/api/reservas/`);
                const data = await response.json();
                const tbody = document.getElementById('reservasTableBody');
                tbody.innerHTML = data.map(r => `
                    <tr>
                        <td>${r.id_reserva}</td>
                        <td>${r.data}</td>
                        <td>${r.quant_horas}</td>
                        <td>${r.status}</td>
                        <td>${r.cpf_cliente}</td>
                        <td>${r.id_campo}</td>
                        <td>
                            <button class="btn btn-danger" onclick="deletarReserva(${r.id_reserva})">Deletar</button>
                        </td>
                    </tr>
                `).join('');
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function deletarReserva(id) {
            if (!confirm('Tem certeza que deseja deletar esta reserva?')) return;
            try {
                const response = await fetch(`${API_URL()}/api/reservas/${id}`, { method: 'DELETE' });
                if (response.ok) {
                    showMessage('Reserva deletada!', 'success');
                    listarReservas();
                } else {
                    showMessage('Erro ao deletar', 'error');
                }
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        // Fun√ß√µes de Produtos
        async function criarProduto() {
            try {
                const data = {
                    nome: document.getElementById('produto_nome').value,
                    preco: parseFloat(document.getElementById('produto_preco').value),
                    validade: document.getElementById('produto_validade').value || null,
                    quant_min_estoque: parseInt(document.getElementById('produto_quant_min').value),
                    id_admin_cadastrou: parseInt(document.getElementById('produto_admin').value)
                };
                const response = await fetch(`${API_URL()}/api/produtos/`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                if (response.ok) {
                    showMessage('Produto criado com sucesso!', 'success');
                    listarProdutos();
                } else {
                    showMessage('Erro: ' + result.detail, 'error');
                }
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function listarProdutos() {
            try {
                const response = await fetch(`${API_URL()}/api/produtos/`);
                const data = await response.json();
                const tbody = document.getElementById('produtosTableBody');
                tbody.innerHTML = data.map(p => `
                    <tr>
                        <td>${p.id_produto}</td>
                        <td>${p.nome}</td>
                        <td>R$ ${p.preco.toFixed(2)}</td>
                        <td>${p.validade || 'N/A'}</td>
                        <td>${p.quant_min_estoque}</td>
                        <td>
                            <button class="btn btn-danger" onclick="deletarProduto(${p.id_produto})">Deletar</button>
                        </td>
                    </tr>
                `).join('');
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function deletarProduto(id) {
            if (!confirm('Tem certeza que deseja deletar este produto?')) return;
            try {
                const response = await fetch(`${API_URL()}/api/produtos/${id}`, { method: 'DELETE' });
                if (response.ok) {
                    showMessage('Produto deletado!', 'success');
                    listarProdutos();
                } else {
                    showMessage('Erro ao deletar', 'error');
                }
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        // Fun√ß√µes de Estoque
        async function criarEstoque() {
            try {
                const data = {
                    id_produto: parseInt(document.getElementById('estoque_produto').value),
                    quant_present: parseInt(document.getElementById('estoque_quant').value)
                };
                const response = await fetch(`${API_URL()}/api/estoque/`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                if (response.ok) {
                    showMessage('Estoque criado com sucesso!', 'success');
                    listarEstoques();
                } else {
                    showMessage('Erro: ' + result.detail, 'error');
                }
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function listarEstoques() {
            try {
                const response = await fetch(`${API_URL()}/api/estoque/`);
                const data = await response.json();
                const tbody = document.getElementById('estoqueTableBody');
                tbody.innerHTML = data.map(e => `
                    <tr>
                        <td>${e.id_estoque}</td>
                        <td>${e.id_produto}</td>
                        <td>${e.quant_present}</td>
                        <td>
                            <button class="btn btn-secondary" onclick="buscarEstoqueProduto(${e.id_produto})">Ver</button>
                        </td>
                    </tr>
                `).join('');
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function buscarEstoqueProduto(id) {
            try {
                const response = await fetch(`${API_URL()}/api/estoque/produto/${id}`);
                const data = await response.json();
                if (response.ok) {
                    document.getElementById('estoque_produto').value = data.id_produto;
                    document.getElementById('estoque_quant').value = data.quant_present;
                    showMessage('Estoque encontrado!', 'success');
                } else {
                    showMessage('Estoque n√£o encontrado', 'error');
                }
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function criarMovimentacao() {
            try {
                const data = {
                    id_estoque: parseInt(document.getElementById('mov_estoque').value),
                    tipo: document.getElementById('mov_tipo').value,
                    quantidade: parseInt(document.getElementById('mov_quant').value),
                    data: document.getElementById('mov_data').value
                };
                const response = await fetch(`${API_URL()}/api/estoque/movimentacoes`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                if (response.ok) {
                    showMessage('Movimenta√ß√£o registrada com sucesso!', 'success');
                    listarEstoques();
                } else {
                    showMessage('Erro: ' + result.detail, 'error');
                }
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        // Fun√ß√µes de Mesas
        async function criarMesa() {
            try {
                const data = {
                    numero: parseInt(document.getElementById('mesa_numero').value),
                    status: document.getElementById('mesa_status').value
                };
                const response = await fetch(`${API_URL()}/api/mesas/`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                if (response.ok) {
                    showMessage('Mesa criada com sucesso!', 'success');
                    listarMesas();
                } else {
                    showMessage('Erro: ' + result.detail, 'error');
                }
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function listarMesas() {
            try {
                const response = await fetch(`${API_URL()}/api/mesas/`);
                const data = await response.json();
                const tbody = document.getElementById('mesasTableBody');
                tbody.innerHTML = data.map(m => `
                    <tr>
                        <td>${m.numero}</td>
                        <td>${m.status}</td>
                        <td>
                            <button class="btn btn-danger" onclick="deletarMesa(${m.numero})">Deletar</button>
                        </td>
                    </tr>
                `).join('');
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function deletarMesa(numero) {
            if (!confirm('Tem certeza que deseja deletar esta mesa?')) return;
            try {
                const response = await fetch(`${API_URL()}/api/mesas/${numero}`, { method: 'DELETE' });
                if (response.ok) {
                    showMessage('Mesa deletada!', 'success');
                    listarMesas();
                } else {
                    showMessage('Erro ao deletar', 'error');
                }
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        // Fun√ß√µes de Comandas
        async function criarComanda() {
            try {
                const data = {
                    data: document.getElementById('comanda_data').value,
                    status: document.getElementById('comanda_status').value,
                    numero_mesa: parseInt(document.getElementById('comanda_mesa').value),
                    cpf_cliente: document.getElementById('comanda_cpf').value,
                    id_funcionario: parseInt(document.getElementById('comanda_funcionario').value)
                };
                const response = await fetch(`${API_URL()}/api/comandas/`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                if (response.ok) {
                    showMessage('Comanda criada com sucesso!', 'success');
                    listarComandas();
                } else {
                    showMessage('Erro: ' + result.detail, 'error');
                }
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function listarComandas() {
            try {
                const response = await fetch(`${API_URL()}/api/comandas/`);
                const data = await response.json();
                const tbody = document.getElementById('comandasTableBody');
                tbody.innerHTML = data.map(c => `
                    <tr>
                        <td>${c.id_comanda}</td>
                        <td>${c.data}</td>
                        <td>${c.status}</td>
                        <td>${c.numero_mesa}</td>
                        <td>${c.cpf_cliente}</td>
                        <td>
                            <button class="btn btn-secondary" onclick="verItensComanda(${c.id_comanda})">Ver Itens</button>
                            <button class="btn btn-danger" onclick="deletarComanda(${c.id_comanda})">Deletar</button>
                        </td>
                    </tr>
                `).join('');
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function deletarComanda(id) {
            if (!confirm('Tem certeza que deseja deletar esta comanda?')) return;
            try {
                const response = await fetch(`${API_URL()}/api/comandas/${id}`, { method: 'DELETE' });
                if (response.ok) {
                    showMessage('Comanda deletada!', 'success');
                    listarComandas();
                } else {
                    showMessage('Erro ao deletar', 'error');
                }
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function adicionarItemComanda() {
            try {
                const idComanda = parseInt(document.getElementById('item_comanda_id').value);
                const data = {
                    id_comanda: idComanda,
                    id_produto: parseInt(document.getElementById('item_comanda_produto').value),
                    quantidade: parseInt(document.getElementById('item_comanda_quant').value),
                    preco_unitario: parseFloat(document.getElementById('item_comanda_preco').value)
                };
                const response = await fetch(`${API_URL()}/api/comandas/${idComanda}/itens`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                if (response.ok) {
                    showMessage('Item adicionado com sucesso!', 'success');
                } else {
                    showMessage('Erro: ' + result.detail, 'error');
                }
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function verItensComanda(id) {
            try {
                const response = await fetch(`${API_URL()}/api/comandas/${id}/itens`);
                const data = await response.json();
                alert('Itens da Comanda:\n' + JSON.stringify(data, null, 2));
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        // Fun√ß√µes de Compras
        async function criarCompra() {
            try {
                const data = {
                    data: document.getElementById('compra_data').value,
                    valor_total: parseFloat(document.getElementById('compra_valor').value),
                    cpf_cliente: document.getElementById('compra_cpf').value,
                    id_usuario_cadastrou: parseInt(document.getElementById('compra_usuario').value)
                };
                const response = await fetch(`${API_URL()}/api/compras/`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                if (response.ok) {
                    showMessage('Compra criada com sucesso!', 'success');
                    listarCompras();
                } else {
                    showMessage('Erro: ' + result.detail, 'error');
                }
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function listarCompras() {
            try {
                const response = await fetch(`${API_URL()}/api/compras/`);
                const data = await response.json();
                const tbody = document.getElementById('comprasTableBody');
                tbody.innerHTML = data.map(c => `
                    <tr>
                        <td>${c.id_compra}</td>
                        <td>${c.data}</td>
                        <td>R$ ${c.valor_total.toFixed(2)}</td>
                        <td>${c.cpf_cliente}</td>
                        <td>
                            <button class="btn btn-secondary" onclick="verItensCompra(${c.id_compra})">Ver Itens</button>
                            <button class="btn btn-danger" onclick="deletarCompra(${c.id_compra})">Deletar</button>
                        </td>
                    </tr>
                `).join('');
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function deletarCompra(id) {
            if (!confirm('Tem certeza que deseja deletar esta compra?')) return;
            try {
                const response = await fetch(`${API_URL()}/api/compras/${id}`, { method: 'DELETE' });
                if (response.ok) {
                    showMessage('Compra deletada!', 'success');
                    listarCompras();
                } else {
                    showMessage('Erro ao deletar', 'error');
                }
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function adicionarItemCompra() {
            try {
                const idCompra = parseInt(document.getElementById('item_compra_id').value);
                const data = {
                    id_compra: idCompra,
                    id_produto: parseInt(document.getElementById('item_compra_produto').value),
                    quantidade: parseInt(document.getElementById('item_compra_quant').value),
                    preco_unitario: parseFloat(document.getElementById('item_compra_preco').value)
                };
                const response = await fetch(`${API_URL()}/api/compras/${idCompra}/itens`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                if (response.ok) {
                    showMessage('Item adicionado com sucesso!', 'success');
                } else {
                    showMessage('Erro: ' + result.detail, 'error');
                }
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function verItensCompra(id) {
            try {
                const response = await fetch(`${API_URL()}/api/compras/${id}/itens`);
                const data = await response.json();
                alert('Itens da Compra:\n' + JSON.stringify(data, null, 2));
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        // Fun√ß√µes de Pagamentos
        async function criarPagamento() {
            try {
                const data = {
                    valor: parseFloat(document.getElementById('pagamento_valor').value),
                    forma: document.getElementById('pagamento_forma').value,
                    tipo_pagamento: document.getElementById('pagamento_tipo').value,
                    id_usuario_cadastrou: parseInt(document.getElementById('pagamento_usuario').value)
                };
                const response = await fetch(`${API_URL()}/api/pagamentos/`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                if (response.ok) {
                    showMessage('Pagamento criado com sucesso!', 'success');
                    listarPagamentos();
                } else {
                    showMessage('Erro: ' + result.detail, 'error');
                }
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function listarPagamentos() {
            try {
                const response = await fetch(`${API_URL()}/api/pagamentos/`);
                const data = await response.json();
                const tbody = document.getElementById('pagamentosTableBody');
                tbody.innerHTML = data.map(p => `
                    <tr>
                        <td>${p.id_pagamento}</td>
                        <td>R$ ${p.valor.toFixed(2)}</td>
                        <td>${p.forma}</td>
                        <td>${p.tipo_pagamento}</td>
                        <td>
                            <button class="btn btn-danger" onclick="deletarPagamento(${p.id_pagamento})">Deletar</button>
                        </td>
                    </tr>
                `).join('');
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        async function deletarPagamento(id) {
            if (!confirm('Tem certeza que deseja deletar este pagamento?')) return;
            try {
                const response = await fetch(`${API_URL()}/api/pagamentos/${id}`, { method: 'DELETE' });
                if (response.ok) {
                    showMessage('Pagamento deletado!', 'success');
                    listarPagamentos();
                } else {
                    showMessage('Erro ao deletar', 'error');
                }
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        function atualizarCamposVinculo() {
            const tipo = document.getElementById('vinculo_tipo').value;
            document.getElementById('vinculo_comanda_group').style.display = tipo === 'comanda' ? 'block' : 'none';
            document.getElementById('vinculo_reserva_group').style.display = tipo === 'reserva' ? 'block' : 'none';
            document.getElementById('vinculo_compra_group').style.display = tipo === 'compra' ? 'block' : 'none';
        }

        async function vincularPagamento() {
            try {
                const tipo = document.getElementById('vinculo_tipo').value;
                const idPagamento = parseInt(document.getElementById('vinculo_pagamento').value);
                let endpoint, data;

                if (tipo === 'comanda') {
                    endpoint = `${API_URL()}/api/pagamentos/comanda`;
                    data = {
                        id_pagamento: idPagamento,
                        id_comanda: parseInt(document.getElementById('vinculo_comanda').value)
                    };
                } else if (tipo === 'reserva') {
                    endpoint = `${API_URL()}/api/pagamentos/reserva`;
                    data = {
                        id_pagamento: idPagamento,
                        id_reserva: parseInt(document.getElementById('vinculo_reserva').value),
                        cpf_cliente: document.getElementById('vinculo_reserva_cpf').value,
                        porcentagem: parseFloat(document.getElementById('vinculo_reserva_porc').value)
                    };
                } else if (tipo === 'compra') {
                    endpoint = `${API_URL()}/api/pagamentos/compra`;
                    data = {
                        id_pagamento: idPagamento,
                        id_compra: parseInt(document.getElementById('vinculo_compra').value)
                    };
                }

                const response = await fetch(endpoint, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                if (response.ok) {
                    showMessage('Pagamento vinculado com sucesso!', 'success');
                } else {
                    showMessage('Erro: ' + result.detail, 'error');
                }
            } catch (error) {
                showMessage('Erro: ' + error.message, 'error');
            }
        }

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            testConnection();
        });
    </script>
</body>
</html>
